<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Notion Embed • Interactive Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: transparent; /* lets Notion's background show through */
      --card: rgba(255,255,255,0.7);
      --text: #111;
      --muted: #666;
      --shadow: 0 6px 30px rgba(0,0,0,0.08);
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: var(--bg);
    }
    .wrap {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .card {
      width: min(1100px, 100%);
      background: var(--card);
      backdrop-filter: blur(6px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,0.06);
      padding: 20px;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }
    .title {
      font-weight: 700;
      font-size: 20px;
      letter-spacing: .2px;
    }
    .controls {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }
    .controls select {
      border: 1px solid rgba(0,0,0,.15);
      border-radius: 10px;
      padding: 8px 10px;
      background: white;
      font-size: 14px;
      cursor: pointer;
    }
    .hint {
      color: var(--muted);
      font-size: 12px;
      margin-top: 8px;
    }
    /* Make the chart fill the available space nicely inside the card */
    .plot {
      position: relative;
      width: 100%;
      height: min(70vh, 520px);
    }
    canvas { background: transparent; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div class="title">Interactive Metrics</div>
        <div class="controls">
          <label>
            <span style="font-size:12px;color:#666;margin-right:6px;">Dataset</span>
            <select id="datasetSelect">
              <option value="revenue">Revenue ($k)</option>
              <option value="users">Active Users (k)</option>
              <option value="nps">NPS</option>
            </select>
          </label>
          <label>
            <span style="font-size:12px;color:#666;margin-right:6px;">Chart</span>
            <select id="typeSelect">
              <option value="line">Line</option>
              <option value="bar">Bar</option>
            </select>
          </label>
        </div>
      </div>
      <div class="plot">
        <canvas id="chart"></canvas>
      </div>
      <div class="hint">Tip: To use your own data, open this file and replace the numbers in <code>DATA.revenue</code>, <code>DATA.users</code>, or <code>DATA.nps</code>. Then host the file (e.g., GitHub Pages/Netlify) and paste the public link into a Notion “Embed”.</div>
    </div>
  </div>

  <script>
    // ======= Sample data (edit these arrays with your own numbers) =======
    const LABELS = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    const DATA = {
      revenue: {
        label: "Revenue",
        unit: "$k",
        series: [
          { name: "Product A", values: [42,48,51,55,60,66,70,74,79,85,92,98] },
          { name: "Product B", values: [30,31,33,35,36,39,41,44,47,49,52,55] },
          { name: "Product C", values: [18,21,22,24,26,28,29,31,33,36,38,40] }
        ]
      },
      users: {
        label: "Active Users",
        unit: "k",
        series: [
          { name: "iOS", values: [12,12.5,13,14,14.5,15,15.8,16.6,17.5,18.2,19,19.8] },
          { name: "Android", values: [10,10.6,11.3,12,12.5,13.1,13.9,14.6,15.3,16,16.7,17.3] },
          { name: "Web", values: [7,7.2,7.5,7.8,8.1,8.5,8.9,9.3,9.7,10.1,10.5,11] }
        ]
      },
      nps: {
        label: "NPS",
        unit: "",
        series: [
          { name: "North America", values: [34,36,38,37,39,42,44,46,45,47,49,51] },
          { name: "EMEA", values: [28,29,31,30,32,34,36,37,39,40,41,43] },
          { name: "APAC", values: [22,24,25,26,28,29,31,33,34,36,38,40] }
        ]
      }
    };

    // ======= Chart init =======
    const ctx = document.getElementById("chart");
    let currentType = "line";
    let currentKey = "revenue";
    let chart;

    function buildDatasets(key, type) {
      const cfg = DATA[key];
      const isLine = type === "line";
      return cfg.series.map(s => ({
        label: s.name,
        data: s.values,
        borderWidth: isLine ? 2 : 0,
        tension: isLine ? 0.3 : 0,
        fill: false
      }));
    }

    function buildOptions(key) {
      const cfg = DATA[key];
      return {
        responsive: true,
        maintainAspectRatio: false,
        interaction: { mode: "index", intersect: false },
        plugins: {
          legend: { position: "top" },
          tooltip: {
            callbacks: {
              label: function(context) {
                const val = context.raw;
                const unit = DATA[currentKey].unit;
                return `${context.dataset.label}: ${val}${unit}`;
              }
            }
          },
          title: { display: false }
        },
        scales: {
          x: { grid: { display: false } },
          y: { grid: { color: "rgba(0,0,0,0.06)" }, ticks: { callback: v => `${v}${DATA[currentKey].unit}` } }
        }
      };
    }

    function render() {
      const data = {
        labels: LABELS,
        datasets: buildDatasets(currentKey, currentType)
      };
      const options = buildOptions(currentKey);
      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: currentType,
        data,
        options
      });
    }

    // Wire up controls
    document.getElementById("datasetSelect").addEventListener("change", (e) => {
      currentKey = e.target.value;
      render();
    });
    document.getElementById("typeSelect").addEventListener("change", (e) => {
      currentType = e.target.value;
      render();
    });

    // First render
    render();
  </script>
</body>
</html>
